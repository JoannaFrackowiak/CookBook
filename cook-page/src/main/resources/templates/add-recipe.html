<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add recipe</title>
</head>
<body>
<h1>Add a new recipe</h1>

<form action="#" th:action="@{/new-recipe}" th:object="${createUpdateRecipeDto}" method="post">
    Name:
    <input type="text" th:field="*{name}"/>
    <br/>
    Type:
<!--        <input type="text" th:field="*{typeOfRecipeId}" list="typesList">-->
<!--        <datalist id="typesList">-->
<!--            <option th:value="${typesOfRecipe.id}" th:each="typesOfRecipe:${typesList}" th:text="${typesOfRecipe.name}"></option>-->
<!--        </datalist>-->
    <select th:field="*{typeOfRecipeId}">
        <option th:value="${typesOfRecipe.id}" th:each="typesOfRecipe: ${typesList}"
                th:text="${typesOfRecipe.name}"></option>
    </select>
    <br/>
    Level:
    <select name="level" th:field="*{level}">
        <option th:each="level : ${levels}"
                th:value="${level}" th:text="${level.displayName}"></option>
    </select>
    <br/>
    Time:
    <input type="text" th:field="*{time}"/>
    <br/>
    Ingredients:
    <table>
        <tr>
            <th>Amount</th>
            <th>Ingredient, Unit</th>
        </tr>
        <tr th:each="amountDto, itemStat : *{ingredientsWithAmount}">
            <td>
                <label>
                    <input th:field="*{ingredientsWithAmount[__${itemStat.index}__].amount}"/>
                </label>
            </td>
            <td>
                <label>
                    <select th:field="*{ingredientsWithAmount[__${itemStat.index}__].ingredientId}">
                        <option th:value="${ingredient.id}" th:each="ingredient : ${ingredients}"
                                th:text="${ingredient.name + ', ' + ingredient.unit.displayName}"></option>
                    </select>
                </label>
            </td>
        </tr>
    </table>
    <label>
        Details:
        <br/>
        <textarea name="details" rows="10" cols="30" th:field="*{details}"></textarea>
    </label>
    <br/>

    <input type="submit" value="submit"/>
</form>
</body>
</html>